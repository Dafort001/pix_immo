# ğŸ¨ Professional Image Processing Workflow

## Ãœberblick

PIX.IMMO verwendet einen **professionellen Bildverarbeitungs-Workflow**, bei dem echte HDR-Belichtungsreihen an spezialisierte Bildbearbeiter gesendet werden, statt automatisches HDR-Merging in der App.

## Warum Professional Processing?

### âœ… Vorteile

**1. Konsistente QualitÃ¤t**
```
ğŸ¨ Professionelle Editoren
   â†’ Einheitlicher Look & Feel
   â†’ Marken-Konsistenz garantiert
   â†’ Jahrelange Erfahrung
```

**2. Individuelle Bearbeitung**
```
ğŸ‘ï¸ Menschliches Auge
   â†’ Jedes Bild wird einzeln beurteilt
   â†’ Problemstellen werden erkannt
   â†’ Kreative Entscheidungen
```

**3. HÃ¶here QualitÃ¤t**
```
ğŸ’» Desktop Software
   â†’ Adobe Lightroom Classic
   â†’ Photoshop fÃ¼r Retusche
   â†’ Mehr Rechenleistung
   â†’ Bessere Algorithmen
```

**4. Spezial-Behandlungen**
```
âœ¨ Advanced Editing
   â†’ Deghosting bei Bewegung
   â†’ Perspektivkorrektur
   â†’ Objekt-Entfernung
   â†’ Sky Replacement
   â†’ Virtuelle MÃ¶blierung
```

### âŒ Warum NICHT automatisches In-App HDR?

```
ğŸ“± App-basiertes HDR:
   âŒ Inkonsistente Ergebnisse
   âŒ Begrenzte Rechenleistung
   âŒ Keine QualitÃ¤tskontrolle
   âŒ Einheitslook schwierig
   âŒ Keine SonderwÃ¼nsche
   âŒ Batterie-intensiv
   
ğŸ¨ Professional Processing:
   âœ… Garantierte Konsistenz
   âœ… Workstation-Power
   âœ… Manuelle QC
   âœ… Brand Guidelines
   âœ… Custom Requests
   âœ… Keine App-Belastung
```

## Workflow-Ãœbersicht

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPLETE WORKFLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ CAPTURE (Fotograf vor Ort)
   ğŸ“¸ PIX.IMMO Camera App
      â†’ HDR Bracketing System
      â†’ 3Ã— DNG (Pro) oder 5Ã— JPG (Standard)
      â†’ Stack-basierte Erfassung
      â†’ EXIF-Metadaten vollstÃ¤ndig
   
   â±ï¸ Duration: ~5-10 Min pro Raum

2ï¸âƒ£ REVIEW (Fotograf vor Ort)
   ğŸ–¼ï¸ Gallery App
      â†’ Stacks durchsehen
      â†’ QualitÃ¤t prÃ¼fen
      â†’ Fehlerhafte Aufnahmen neu machen
      â†’ Auswahl fÃ¼r Upload
   
   â±ï¸ Duration: ~2-5 Min

3ï¸âƒ£ UPLOAD (Fotograf vor Ort oder spÃ¤ter)
   â˜ï¸ Upload to Processing Team
      â†’ Stapel auswÃ¤hlen
      â†’ Immobilienadresse eingeben
      â†’ Notizen hinzufÃ¼gen
      â†’ Upload starten
   
   â±ï¸ Duration: ~5-15 Min (je nach DateigrÃ¶ÃŸe & Verbindung)

4ï¸âƒ£ PROCESSING (Processing Team, Remote)
   ğŸ¨ Professional Editing
      â†’ HDR Merge in Lightroom
      â†’ Tone Mapping
      â†’ Farbkorrektur
      â†’ Retusche
      â†’ Export & QC
   
   â±ï¸ Duration: 24-48 Stunden

5ï¸âƒ£ DELIVERY (Automatisch)
   ğŸ“§ Client Notification
      â†’ E-Mail an Auftraggeber
      â†’ Download-Link
      â†’ Galerie-Zugang
   
   â±ï¸ Duration: Sofort nach Processing

6ï¸âƒ£ USAGE (Client)
   ğŸ  Property Marketing
      â†’ Website
      â†’ ExposÃ©
      â†’ Social Media
      â†’ MLS Listings
```

## Stack Upload System

### Galerie-Interface

**Selection Mode:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Galerie               [Upload]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  âœ“  â”‚  â”‚  âœ“  â”‚  â”‚     â”‚      â”‚  â† Stacks mit Checkmarks
â”‚  â”‚ 3Ã—  â”‚  â”‚ 5Ã—  â”‚  â”‚ 3Ã—  â”‚      â”‚
â”‚  â”‚ DNG â”‚  â”‚ JPG â”‚  â”‚ DNG â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  Wohnz.    KÃ¼che    Schlafz.     â”‚
â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [2 Stapel hochladen]         â”‚  â† FAB Button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- âœ… Multi-Select fÃ¼r Stacks
- âœ… "Alle auswÃ¤hlen" / "Keine"
- âœ… Anzahl ausgewÃ¤hlter Stacks
- âœ… Gesamtzahl Fotos & DateigrÃ¶ÃŸe
- âœ… FAB mit Upload-Button

### Upload-Interface

**Form:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload zum Processing Team       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚ ğŸ“¦ Upload-Zusammenfassung        â”‚
â”‚    Stapel: 2                     â”‚
â”‚    Fotos: 8                      â”‚
â”‚    GrÃ¶ÃŸe: ~112 MB                â”‚
â”‚                                  â”‚
â”‚ Immobilienadresse *              â”‚
â”‚ [Musterstr. 123, 20095 HH     ]  â”‚
â”‚                                  â”‚
â”‚ Anmerkungen (optional)           â”‚
â”‚ [Besondere WÃ¼nsche...         ]  â”‚
â”‚ [                             ]  â”‚
â”‚                                  â”‚
â”‚ â„¹ï¸ Ihre Belichtungsreihen werden â”‚
â”‚   an unser Processing Team ge-   â”‚
â”‚   sendet. Fertige Bilder in     â”‚
â”‚   24-48 Stunden.                 â”‚
â”‚                                  â”‚
â”‚     [ğŸ“¤ Jetzt hochladen]         â”‚
â”‚                                  â”‚
â”‚ AusgewÃ¤hlte Stapel (2)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [thumb] Wohnzimmer  [PRO] â”‚  â”‚
â”‚  â”‚ 3Ã— DNG Â· 14:30            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [thumb] KÃ¼che       [STD] â”‚  â”‚
â”‚  â”‚ 5Ã— JPG Â· 15:01            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Upload Process

**1. Vorbereitung:**
```typescript
// Collect stack metadata
const uploadPayload = {
  jobId: generateJobId(),
  photographer: currentUser,
  property: {
    address: formData.address,
    notes: formData.notes
  },
  stacks: selectedStacks.map(stack => ({
    stackId: stack.stackId,
    shots: stack.shots.map(shot => ({
      id: shot.id,
      exposureValue: shot.exposureValue,
      realShutterSpeed: shot.realShutterSpeed,
      fileFormat: shot.fileFormat,
      fileSize: shot.fileSize,
      exifData: shot.exif
    }))
  })),
  totalPhotos: totalPhotos,
  totalSize: totalSize,
  timestamp: new Date().toISOString()
};
```

**2. Upload:**
```typescript
// Upload to cloud storage (Supabase Storage)
for (const stack of stacks) {
  for (const shot of stack.shots) {
    // Upload actual image file
    const { data, error } = await supabase.storage
      .from('raw-captures')
      .upload(
        `${jobId}/${stack.stackId}/${shot.id}.${shot.fileFormat.toLowerCase()}`,
        shot.file,
        {
          cacheControl: '3600',
          upsert: false,
          contentType: shot.fileFormat === 'DNG' ? 'image/x-adobe-dng' : 'image/jpeg'
        }
      );
    
    // Upload EXIF metadata separately
    await supabase.storage
      .from('raw-captures')
      .upload(
        `${jobId}/${stack.stackId}/${shot.id}.json`,
        JSON.stringify(shot.exifData),
        { contentType: 'application/json' }
      );
  }
}

// Create job record in database
await supabase
  .from('processing_jobs')
  .insert({
    id: jobId,
    status: 'uploaded',
    photographer_id: currentUser.id,
    property_address: formData.address,
    notes: formData.notes,
    stacks: uploadPayload.stacks,
    total_photos: totalPhotos,
    total_size: totalSize,
    created_at: new Date().toISOString()
  });

// Notify processing team
await supabase.functions.invoke('notify-processing-team', {
  body: { jobId }
});
```

**3. Progress Tracking:**
```
Upload lÃ¤uft...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Wird hochgeladen     â”‚
â”‚         75%            â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Files: 6/8 hochgeladen
Verbleibend: ~30 Sekunden
```

## Processing Team Workflow

### 1. Job Eingang

**Notification:**
```
ğŸ“§ Neue Upload-Benachrichtigung

Von: PIX.IMMO System
An: processing@pix-immo.de

Neuer Processing Job verfÃ¼gbar!

Job ID: job_20251105_143022
Fotograf: Max Mustermann
Immobilie: Elbchaussee 42, 22763 Hamburg
Stapel: 2 (8 Fotos total)
Format: 3Ã— DNG, 5Ã— JPG
GrÃ¶ÃŸe: 112 MB

Notizen: "Bitte Fenster-Details besonders beachten"

[Zum Processing Dashboard â†’]
```

**Processing Dashboard:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PIX.IMMO Processing Dashboard                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ ğŸ†• NEUE JOBS (3)                                â”‚
â”‚                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Job #2051105-001                     [NEU] â”‚ â”‚
â”‚ â”‚ Elbchaussee 42, Hamburg                    â”‚ â”‚
â”‚ â”‚ 2 Stapel Â· 8 Fotos Â· 112 MB                â”‚ â”‚
â”‚ â”‚ Fotograf: Max Mustermann                   â”‚ â”‚
â”‚ â”‚ Hochgeladen: Heute, 14:30                  â”‚ â”‚
â”‚ â”‚                                            â”‚ â”‚
â”‚ â”‚ [Herunterladen] [Bearbeiten starten]       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ ğŸ”„ IN BEARBEITUNG (5)                           â”‚
â”‚ â³ WARTE AUF QC (2)                             â”‚
â”‚ âœ… HEUTE FERTIG (12)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Download & Import

**Batch Download:**
```bash
# Processing Team lÃ¤dt Job herunter
$ pix-immo-cli download job_20251105_143022

Downloading job_20251105_143022...
â”œâ”€â”€ stack_20251105T143022_a7f3k9/
â”‚   â”œâ”€â”€ photo_1_1.dng (-2 EV, 1/500s) âœ“
â”‚   â”œâ”€â”€ photo_1_2.dng (0 EV, 1/125s)  âœ“
â”‚   â”œâ”€â”€ photo_1_3.dng (+2 EV, 1/30s)  âœ“
â”‚   â””â”€â”€ metadata.json                 âœ“
â”œâ”€â”€ stack_20251105T150145_b8g4m2/
â”‚   â”œâ”€â”€ photo_2_1.jpg (-2 EV)         âœ“
â”‚   â”œâ”€â”€ photo_2_2.jpg (-1 EV)         âœ“
â”‚   â”œâ”€â”€ photo_2_3.jpg (0 EV)          âœ“
â”‚   â”œâ”€â”€ photo_2_4.jpg (+1 EV)         âœ“
â”‚   â”œâ”€â”€ photo_2_5.jpg (+2 EV)         âœ“
â”‚   â””â”€â”€ metadata.json                 âœ“
â””â”€â”€ job_metadata.json                 âœ“

Download complete: 112 MB in 8 files
Ready for processing!
```

### 3. HDR Processing (Lightroom)

**Step-by-Step:**
```
1. Import Stack in Lightroom
   File â†’ Import Photos...
   â†’ Select all shots from stack
   
2. Create HDR
   Select all 3/5 images
   Photo â†’ Photo Merge â†’ HDR
   
   Settings:
   â˜‘ï¸ Auto Align
   â˜‘ï¸ Auto Tone
   â˜‘ï¸ Deghost: Medium (if movement)
   â˜ Create Stack (not needed)
   
   â†’ Creates: stack_xyz_HDR.dng

3. Edit HDR
   Basic:
   - Exposure: Adjust to taste
   - Contrast: +15-25
   - Highlights: -60 to -80 (recover windows!)
   - Shadows: +40 to +60 (lift dark areas)
   - Whites: +10 to +20
   - Blacks: -10 to -15
   
   HSL:
   - Blues: Saturation +10, Luminance +5
   - Greens: Saturation +5
   - Yellows: Saturation -5
   
   Detail:
   - Sharpening: 60-70
   - Noise Reduction: 20-30
   
   Lens Corrections:
   â˜‘ï¸ Remove Chromatic Aberration
   â˜‘ï¸ Enable Profile Corrections
   
   Transform:
   - Auto (or Manual if needed)
   - Constrain Crop

4. Apply PIX.IMMO Preset
   Develop â†’ User Presets â†’ PIX.IMMO Standard
   â†’ Ensures brand consistency

5. Export
   File â†’ Export
   Format: JPEG
   Quality: 95%
   Color Space: sRGB
   Size: 4000px longest edge
   Sharpening: High for Screen
   Metadata: Copyright + PIX.IMMO watermark
```

### 4. Quality Control

**QC Checklist:**
```
âœ“ Exposure korrekt?
âœ“ Fenster haben Details (nicht ausgebrannt)?
âœ“ Schatten haben Details?
âœ“ WeiÃŸabgleich natÃ¼rlich?
âœ“ Vertikale Linien gerade?
âœ“ Keine Ghosting-Artefakte?
âœ“ Keine stÃ¶renden Objekte?
âœ“ Konsistent mit anderen Bildern des Sets?
âœ“ PIX.IMMO Brand Guidelines eingehalten?
```

**Spezial-Behandlungen:**
- **Fenster Ã¼berbelichtet:** Brightness Mask verwenden
- **Ghosting:** Manuelle Retusche in Photoshop
- **Krumme Linien:** Transform Tool
- **StÃ¶rende Objekte:** Clone Stamp / Content Aware Fill
- **Dunkle Ecken:** Radial Filter mit +Exposure

### 5. Export & Upload

**Export Settings:**
```
Format: JPEG
Quality: 95%
Color Space: sRGB IEC61966-2.1
Resolution: 72 PPI (web)
Size: 4000px longest edge
Metadata: Copyright, Creator, Keywords
Watermark: PIX.IMMO (optional)
Naming: [JobID]_[Room]_[Number].jpg
  â†’ job_20251105_001_wohnzimmer_01.jpg
```

**Upload zu Delivery:**
```typescript
// Processing Team uploaded fertige Bilder
await supabase.storage
  .from('processed-images')
  .upload(
    `${jobId}/final/wohnzimmer_01.jpg`,
    finalImage,
    {
      contentType: 'image/jpeg',
      cacheControl: '3600'
    }
  );

// Update job status
await supabase
  .from('processing_jobs')
  .update({
    status: 'completed',
    processed_at: new Date().toISOString(),
    processed_by: editor.id,
    final_image_count: finalImages.length
  })
  .eq('id', jobId);

// Trigger client notification
await supabase.functions.invoke('notify-client-delivery', {
  body: { jobId }
});
```

## Client Delivery

### Notification Email

```
Von: PIX.IMMO <noreply@pix-immo.de>
An: kunde@example.com
Betreff: âœ… Ihre Immobilienfotos sind fertig!

Hallo Herr/Frau Musterkunde,

Ihre professionell bearbeiteten Immobilienfotos sind nun verfÃ¼gbar!

ğŸ“ Immobilie: Elbchaussee 42, 22763 Hamburg
ğŸ“¸ Anzahl Bilder: 8 HDR-Fotos
â±ï¸ Bearbeitet: 05.11.2025, 16:45

[Fotos jetzt herunterladen â†’]
[Online-Galerie ansehen â†’]

Die Bilder stehen Ihnen 30 Tage zum Download zur VerfÃ¼gung.

Viel Erfolg bei der Vermarktung!
Ihr PIX.IMMO Team

---
Bei Fragen: support@pix-immo.de
```

### Download Portal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PIX.IMMO Delivery                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ Elbchaussee 42, Hamburg                 â”‚
â”‚ 8 HDR-Fotos Â· Bearbeitet: 05.11.2025   â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚        â”‚
â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜        â”‚
â”‚ Wohnz.   KÃ¼che   Schlaf. Bad           â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚        â”‚
â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚ â”‚     â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜        â”‚
â”‚ Balkon   Eingang AuÃŸen1  AuÃŸen2        â”‚
â”‚                                         â”‚
â”‚ [ Alle herunterladen (24 MB) ]         â”‚
â”‚ [ Einzeln auswÃ¤hlen... ]               â”‚
â”‚                                         â”‚
â”‚ Lizenz: Kommerzielle Nutzung erlaubt   â”‚
â”‚ GÃ¼ltig bis: 05.12.2025                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technische Implementation

### Database Schema (Supabase)

```sql
-- Processing Jobs
CREATE TABLE processing_jobs (
  id TEXT PRIMARY KEY,
  photographer_id UUID REFERENCES auth.users(id),
  property_address TEXT NOT NULL,
  notes TEXT,
  status TEXT NOT NULL DEFAULT 'uploaded',
    -- uploaded, downloading, processing, qc, completed
  
  -- Stack information
  stacks JSONB NOT NULL,
  total_photos INTEGER NOT NULL,
  total_size_mb REAL NOT NULL,
  
  -- Processing info
  assigned_to UUID REFERENCES editors(id),
  processed_at TIMESTAMPTZ,
  final_image_count INTEGER,
  
  -- Timestamps
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- Metadata
  metadata JSONB
);

-- Editors (Processing Team)
CREATE TABLE editors (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  active BOOLEAN DEFAULT true,
  
  -- Stats
  jobs_completed INTEGER DEFAULT 0,
  avg_processing_time_hours REAL,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Processed Images
CREATE TABLE processed_images (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  job_id TEXT REFERENCES processing_jobs(id),
  
  -- Image info
  room_name TEXT NOT NULL,
  file_name TEXT NOT NULL,
  file_size_mb REAL NOT NULL,
  storage_path TEXT NOT NULL,
  
  -- HDR source
  source_stack_id TEXT NOT NULL,
  source_shots INTEGER NOT NULL, -- 3 or 5
  
  -- Edit info
  edited_by UUID REFERENCES editors(id),
  edit_notes TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Storage Buckets
-- raw-captures: DNG/JPG from app
-- processed-images: Final HDR JPEGs
```

### Edge Functions

**notify-processing-team:**
```typescript
// Supabase Edge Function
import { serve } from 'https://deno.land/std@0.168.0/http/server.ts';
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

serve(async (req) => {
  const { jobId } = await req.json();
  
  // Get job details
  const supabase = createClient(
    Deno.env.get('SUPABASE_URL')!,
    Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')!
  );
  
  const { data: job } = await supabase
    .from('processing_jobs')
    .select('*')
    .eq('id', jobId)
    .single();
  
  // Send email to processing team
  await fetch('https://api.sendgrid.com/v3/mail/send', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${Deno.env.get('SENDGRID_API_KEY')}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      personalizations: [{
        to: [{ email: 'processing@pix-immo.de' }]
      }],
      from: { email: 'system@pix-immo.de', name: 'PIX.IMMO System' },
      subject: `ğŸ†• Neuer Processing Job: ${job.property_address}`,
      content: [{
        type: 'text/html',
        value: `
          <h2>Neuer Processing Job verfÃ¼gbar!</h2>
          <p><strong>Job ID:</strong> ${job.id}</p>
          <p><strong>Immobilie:</strong> ${job.property_address}</p>
          <p><strong>Stapel:</strong> ${job.stacks.length} (${job.total_photos} Fotos)</p>
          <p><strong>GrÃ¶ÃŸe:</strong> ${job.total_size_mb} MB</p>
          ${job.notes ? `<p><strong>Notizen:</strong> ${job.notes}</p>` : ''}
          <p><a href="https://pix-immo.de/processing/dashboard">Zum Dashboard â†’</a></p>
        `
      }]
    })
  });
  
  return new Response(JSON.stringify({ success: true }), {
    headers: { 'Content-Type': 'application/json' }
  });
});
```

**notify-client-delivery:**
```typescript
// Similar edge function for client notification
// Sends email when processing is complete
```

## SLA & Quality Standards

### Service Level Agreement

**Processing Time:**
- Standard: 24-48 Stunden
- Express (+50%): 12-24 Stunden
- Rush (+100%): 4-8 Stunden

**Quality Standards:**
- âœ“ Alle Fenster mit Details (keine Ãœberbelichtung)
- âœ“ Alle Schatten mit Details (kein Absaufen)
- âœ“ Vertikale Linien Â± 2Â° (auÃŸer kreative Wahl)
- âœ“ Konsistenter Look Ã¼ber gesamtes Set
- âœ“ Keine sichtbaren Artefakte oder Ghosting
- âœ“ sRGB Farbraum, 95% JPEG QualitÃ¤t
- âœ“ PIX.IMMO Brand Guidelines eingehalten

### Brand Guidelines

**PIX.IMMO Look:**
- NatÃ¼rliche, warme Farbtemperatur (5000-5500K)
- Kontrast: Medium-High (+20-30)
- SÃ¤ttigung: Natural (+5-10)
- Schatten: Slightly lifted (+40-60)
- Highlights: Protected (-60 to -80)
- Clarity: Subtle (+10-20)
- Vibrance: +15-25
- SchÃ¤rfe: 60-70

**Spezial-Regeln:**
- Fenster IMMER mit Details
- Keine Ã¼bersÃ¤ttigten Farben
- Keine "HDR-Look" Effekte
- NatÃ¼rliche Lichtstimmung erhalten
- Warme TÃ¶ne in InnenrÃ¤umen
- KÃ¼hle TÃ¶ne in AuÃŸenaufnahmen

## Zusammenfassung

Der Professional Workflow garantiert:

âœ… **Konsistente QualitÃ¤t** durch manuelle Bearbeitung  
âœ… **Brand Compliance** durch PIX.IMMO Presets  
âœ… **FlexibilitÃ¤t** fÃ¼r SonderwÃ¼nsche  
âœ… **Skalierbarkeit** durch Processing Team  
âœ… **ZuverlÃ¤ssigkeit** durch SLA  

**Von Capture bis Delivery - alles aus einer Hand, aber mit menschlicher Expertise! ğŸ¨âœ¨**

---
*Dokumentation: Professional Workflow - 05.11.2025*
